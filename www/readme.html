<!DOCTYPE html>
<html>
  <head>
    <title>
      README -       NVC - VHDL Compiler and Simulator
    </title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  </head>

  <body>
    <div class="header">
      <h1>NVC - VHDL Compiler and Simulator</h1>
    </div>

    <div class="sidebar">
      <ul>
        <li><a href="index.html">About</a></li>
        <li><a href="news.html">News</a></li>
        <li><a href="download.html">Download</a></li>
        <li><a href="readme.html">README</a></li>
        <li><a href="manual.html">Manual</a></li>
      </ul>
    </div>
    
    <div class="content">
<h3 id="synopsis">Synopsis</h3>
<p><a href="https://github.com/nickg/nvc/actions"><img src="https://github.com/nickg/nvc/workflows/Build%20and%20test/badge.svg?branch=master" alt="Build Status" /></a> <a href="https://coveralls.io/github/nickg/nvc?branch=master"><img src="https://coveralls.io/repos/github/nickg/nvc/badge.svg?branch=master" alt="Coverage Status" /></a></p>
<p>NVC is a <a href="https://en.wikipedia.org/wiki/VHDL">VHDL</a> compiler and simulator.</p>
<p>NVC supports almost all of VHDL-2002 and it has been successfully used to simulate several real-world designs. Experimental support for VHDL-2008 is under development.</p>
<p>NVC has a particular emphasis on simulation performance and uses <a href="https://llvm.org/">LLVM</a> to compile VHDL to native machine code.</p>
<p>NVC is not a synthesizer. That is, it does not output something that could be used to program an FPGA or ASIC. It implements only the simulation behaviour of the language as described by the <a href="https://standards.ieee.org/standard/1076-2019.html">IEEE 1076</a> standard.</p>
<h3 id="usage">Usage</h3>
<p>Simulating a VHDL hardware design involves three steps: <em>analysing</em> the source files; <em>elaborating</em> the design; and <em>running</em> the simulation. This is analogous to compiling, linking, and executing a software program. With NVC these steps are accomplished using the <code>-a</code>, <code>-e</code>, and <code>-r</code> commands:</p>
<pre><code>$ nvc -a my_design.vhd my_tb.vhd
$ nvc -e my_tb
$ nvc -r my_tb</code></pre>
<p>Or more succinctly, as a single command:</p>
<pre><code>$ nvc -a my_design.vhd my_tb.vhd -e my_tb -r</code></pre>
<p>Where <code>my_tb</code> is the name of the top-level test-bench entity.</p>
<p>The full manual can be read after installation using <code>man nvc</code> or <a href="https://www.nickg.me.uk/nvc/manual.html">online</a>.</p>
<h3 id="license">License</h3>
<p>This program is <a href="https://www.gnu.org/philosophy/free-sw.en.html">free software</a> distributed under the terms of the GNU General Public License version 3 or later. You may use, modify, and redistribute the program as you wish but if you distribute modifications you must preserve the license text and copyright notices, and also make the modified source code available to your users.</p>
<p>Certain VHDL libraries developed specifically for NVC under <code>lib/nvc</code> and <code>lib/std</code> are licensed under the GNU Lesser General Public License version 3 or later. This license does not require distribution of the corresponding source for programs dynamically linked against these libraries. See the individual files for details.</p>
<p>The source files for the IEEE standard libraries are included in the repository. These were originally provided under a proprietary license that forbid distribution of modifications, but in 2019 were relicensed under Apache 2.0. Freely redistributable versions of the 1993 libraries were made by editing and removing declarations from the 2019 libraries, and so are also licensed under Apache 2.0.</p>
<p>The VITAL libraries are distributed under <code>lib/vital</code>. These were derived from draft copies of the packages freely available on the internet. The license status of these is unclear as the final text is part of the VITAL standard which must be purchased from the IEEE. If you are packaging this program for a distribution with strict free software requirements you should strip these files from the tarball and configure with <code>--disable-vital</code>.</p>
<h3 id="installing">Installing</h3>
<p>NVC is developed under GNU/Linux and is regularly tested on macOS and Windows under MSYS2.</p>
<p>On macOS NVC can be installed with <code>brew install nvc</code>. NVC is also packaged for <a href="https://www.freshports.org/cad/nvc">FreeBSD</a>, <a href="https://www.freshports.org/cad/nvc">GNU Guix</a>, and Arch Linux <a href="https://www.freshports.org/cad/nvc">AUR</a>. Users of other systems should build from source.</p>
<p>NVC has both a release branch and a development master branch. The master branch should be stable enough for day-to-day use and has comprehensive regression tests, but the release branch is more suitable for third party packaging. The latest released version is <a href="https://github.com/nickg/nvc/releases/download/r1.5.1/nvc-1.5.1.tar.gz">1.5.1</a>. Significant changes since the last release are detailed in <a href="HISTORY.md">HISTORY.md</a>.</p>
<p>To build from a Git clone:</p>
<pre><code>./autogen.sh
mkdir build &amp;&amp; cd build
../configure
make
sudo make install</code></pre>
<p>Generating the configure script requires autoconf 2.63 and automake 1.11 or later.</p>
<p>To build from a released tarball:</p>
<pre><code>./configure
make
sudo make install</code></pre>
<p>To use a specific version of LLVM add <code>--with-llvm=/path/to/llvm-config</code> to the configure command. The minimum supported LLVM version is 7.0. Versions 7, 8, 9, 10, 11 and 12 have all been tested.</p>
<p>On Linux the <code>libdw</code> or <code>libdwarf</code> libraries can be used to generate more accurate VHDL stack traces if installed.</p>
<p>NVC also depends on Flex to generate the lexical analyser.</p>
<p>On a Debian derivative the following should be sufficient to install all required dependencies:</p>
<pre><code>sudo apt-get install build-essential automake autoconf \
  flex check llvm-dev pkg-config zlib1g-dev libdw-dev</code></pre>
<p>Only the MSYS2 environment on Windows is supported. The required dependencies can be installed with:</p>
<pre><code>pacman -S base-devel mingw-w64-x86_64-{llvm,ncurses,libffi,check,pkg-config}</code></pre>
<p><a href="http://gtkwave.sourceforge.net/">GtkWave</a> can be used to view simulation waveforms. Version 3.3.79 or later is required for the default FST format.</p>
<h4 id="testing">Testing</h4>
<p>To run the regression tests:</p>
<pre><code>make check</code></pre>
<p>The unit tests require the <a href="https://libcheck.github.io/check/">check</a> library.</p>
<h3 id="reporting-bugs">Reporting bugs</h3>
<p>Report bugs to <a href="mailto:nick+nvc@nickg.me.uk">nick@nickg.me.uk</a> or using the <a href="https://github.com/nickg/nvc/issues">GitHub issue tracker</a>. Please include enough information to reproduce the problem, ideally with a small VHDL test case. Issue <a href="https://github.com/nickg/nvc/issues/412">#412</a> is a good example.</p>
<p>Please remember that this software is provided to you with NO WARRANTY and no expectation of support, but I will do my best to help with any issues you encounter.</p>
<h3 id="contributing">Contributing</h3>
<p>Thank your for your interest, but please note that at this time I am not looking for additional regular contributors, nor do I have the time to review large new features contributed by third parties. That said I am happy to accept patches to fix minor bugs, build issues, documentation, etc. Patches can be sent with either <a href="https://git-send-email.io/">git –send-email</a> or as a pull request on GitHub.</p>
<p>If you are using NVC for your work or hobby project please get in touch: all feedback is greatly appreciated.</p>
<h3 id="language-support">Language Support</h3>
<p>VHDL standard revisions are commonly referred to by the year they were published. For example IEEE 1076-2008 is known as VHDL-2008. The default standard in NVC is VHDL-93 as this remains the most widely used in the industry. The default can be changed with the <code>--std</code> argument. For example <code>--std=2008</code> selects the VHDL-2008 standard.</p>
<p>The 1993, 2000, and 2002 revisions of the standard are fully supported. Please raise bugs for any missing or incorrectly implemented features you encounter.</p>
<h5 id="vhdl-2008">VHDL-2008</h5>
<p>VHDL-2008 was a large change to the standard with many new features. Support for these is currently in development. Notable omissions include:</p>
<ul>
<li>Enhanced generics on packages and subprograms are not supported.</li>
<li>PSL is not supported.</li>
<li>Hierarchical references are not supported.</li>
<li>Force / release is not supported.</li>
<li><code>case?</code> statement with “don’t care” is not supported.</li>
</ul>
<h5 id="vhdl-2019">VHDL-2019</h5>
<p>The most recent revision of the standard also added many new features. None of these are supported with the exception of conditional compilation directives.</p>
<h5 id="vhpi">VHPI</h5>
<p>The VHDL standard contains a comprehensive API called VHPI for interfacing with foreign code written in C or another language. There is very limited support for this which can be enabled with the <code>--enable-vhpi</code> option when configuring. Refer to the <a href="https://www.nickg.me.uk/nvc/manual.html#VHPI">manual</a> for more information.</p>
<h3 id="vendor-libraries">Vendor Libraries</h3>
<p>NVC provides scripts to compile the simulation libraries of common FPGA vendors.</p>
<ul>
<li>For Xilinx ISE use <code>./tools/build-xilinx-ise.rb</code></li>
<li>For Xilinx Vivado use <code>./tools/build-xilinx-vivado.rb</code></li>
<li>For Altera Quartus use <code>./tools/build-altera.rb</code></li>
<li>For Lattice iCEcube2 use <code>./tools/build-lattice.rb</code></li>
</ul>
<p>The libraries will be installed under <code>~/.nvc/lib</code>.</p>
</div>
</body>
</html>
